<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Correlation and distribution | Zhihao LIU</title> <meta name="author" content="Zhihao LIU"/> <meta name="description" content="Introduction to data science"/> <meta name="keywords" content="geoscience, geospatial data science, geomorphology, seismic, energy transition, marathon"/> <meta property="og:site_name" content="Zhihao LIU"/> <meta property="og:type" content="article"/> <meta property="og:title" content="Zhihao LIU | Correlation and distribution"/> <meta property="og:url" content="https://zhihaol.eu.org/blog/2023/corelation-and-distribution/"/> <meta property="og:description" content="Introduction to data science"/> <meta property="og:locale" content="en"/> <meta name="twitter:card" content="summary"/> <meta name="twitter:title" content="Correlation and distribution"/> <meta name="twitter:description" content="Introduction to data science"/> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìì</text></svg>"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://zhihaol.eu.org/blog/2023/corelation-and-distribution/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Zhihao&nbsp;</span>LIU</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Correlation and distribution</h1> <p class="post-meta">May 12, 2023‚Ä¢ Zhihao</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a> &nbsp; &middot; &nbsp; <a href="/blog/tag/links"> <i class="fas fa-hashtag fa-sm"></i> links</a> &nbsp; &nbsp; &middot; &nbsp; <a href="/blog/category/statistics"> <i class="fas fa-tag fa-sm"></i> statistics</a> &nbsp; <a href="/blog/category/datascience"> <i class="fas fa-tag fa-sm"></i> datascience</a> &nbsp; <a href="/blog/category/machine-learning"> <i class="fas fa-tag fa-sm"></i> machine_learning</a> &nbsp; </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="correlation">Correlation</h2> <p>Pandas provide a useful df.corr() fucntion, where you can set method = Pearson‚Äôr, Kendall‚Äôs œÑ or Spearman‚Äôs œÅ:</p> <ul> <li> <p>Pearson Correlation (Pearson‚Äôs r) measures the linear relationship between two continuous variables.</p> <ul> <li> <p>Assumptions: Pearson correlation assumes that the data follows a normal distribution, and it is sensitive to outliers.</p> </li> <li> <p>Range: Pearson correlation coefficients range from -1 (perfect negative linear relationship) to 1 (perfect positive linear relationship), with 0 indicating no linear relationship.</p> </li> </ul> </li> <li> <p>Kendall Tau Correlation (Kendall‚Äôs œÑ or œÑ) is a non-parametric measure of association between two variables. It assesses the strength and direction of the monotonic (non-linear) relationship between two variables.</p> <ul> <li> <p>Assumptions: Kendall Tau is robust to the presence of outliers and does not assume that the data follows a specific distribution.</p> </li> <li> <p>Range: Kendall‚Äôs œÑ ranges from -1 (perfect inverse association) to 1 (perfect direct association), with 0 indicating no association.</p> </li> </ul> </li> <li> <p>Spearman Rank Correlation (Spearman‚Äôs œÅ or œÅ) is another non-parametric method used to measure the strength and direction of association between two variables. It assesses the monotonic relationship, similar to Kendall Tau but work more efficient over large dataset.</p> <ul> <li> <p>Assumptions: Spearman‚Äôs correlation is also robust to outliers and does not rely on specific distribution assumptions.</p> </li> <li> <p>Range: Spearman‚Äôs œÅ has a similar range to Kendall Tau, from -1 (perfect inverse association) to 1 (perfect direct association), with 0 indicating no association.</p> </li> </ul> </li> </ul> <p>One of the correlation matrix example is:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">corr</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[[</span><span class="sh">'</span><span class="s">sd_correct_dtm1</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">df_dtm1_era5</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">E</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">N</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">h_te_best_fit</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">slope</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">aspect</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">planc</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">profc</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">curvature</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">tpi</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">tpi_9</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">tpi_27</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">sd_era</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">sde_era</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">wf_positive</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">wf_negative</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">month</span><span class="sh">'</span><span class="p">]].</span><span class="nf">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="sh">'</span><span class="s">spearman</span><span class="sh">'</span><span class="p">)</span>

<span class="n">sns</span><span class="p">.</span><span class="nf">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="sh">"</span><span class="s">coolwarm</span><span class="sh">"</span><span class="p">,</span><span class="n">annot</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://i.imgur.com/3eHZufh.png" alt=""/></p> <p>However, correlation is very simple quantification of two variables, which cannot handle high-dimension relationship. In the real-world, consider a scenario where you are analyzing a dataset with multiple features contributing to an outcome. A single correlation value for each pair of features does not capture the complexity of the relationships at play. So, you may see the correlation between two variables may appear extremely weak when the sample contains such a high dimension relationship. As you can see, here is a case of correlation between topo-climatic features and snow depth / snow depth variability.</p> <p>There are several way to deal with such situation.</p> <ul> <li>PCA (Principal Component Analysis) and Dimensionality Reduction</li> <li>Parallel Coordinates Plot</li> <li>T-SNE (t-Distributed Stochastic Neighbor Embedding)</li> </ul> <h2 id="distribution">Distribution</h2> <p>One of concern is the distribution of snow depth. In some case, it said the gamma distribution is the most</p> <p><img src="https://i.imgur.com/wI4trBS.png" alt=""/></p> <h2 id="kolmogorov-smirnov-d-statistic">Kolmogorov-smirnov D statistic</h2> <p>When comparing two datasets, if their data distributions align and their rankings match, it‚Äôs a strong indicator that the datasets are identical. This means the values and their order are in perfect sync. Sometimes, the rankings match, but the data distributions don‚Äôt quite align. This suggests that the datasets share a similar structure, but one may be on a different scale. In such cases, we can use quantile mapping to correct the distribution, assuming we know the correct one. If the distributions of two datasets fit together, meaning that all quantiles are identical, it‚Äôs a green light for focusing on probability. This is especially valuable when you‚Äôre more concerned about event likelihood than the specific order or structure of the data.</p> </div> </article></div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> &copy; Copyright 2023 Zhihao LIU. Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>