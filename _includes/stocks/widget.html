{% assign stocks = site.data.stocks %}
{% if stocks and stocks.symbols and stocks.symbols.size > 0 %}
<div class="stock-widget stock-widget--overview my-4">
  {% if include.title %}
    <h2 class="stock-widget__title">{{ include.title }}</h2>
  {% elsif stocks.title %}
    <h2 class="stock-widget__title">{{ stocks.title }}</h2>
  {% endif %}

  <div class="tradingview-widget-container stock-widget-light">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
    {
      "symbols": [
        {% for symbol in stocks.symbols %}["{{ symbol | escape }}"]{% unless forloop.last %},{% endunless %}{% endfor %}
      ],
      "chartOnly": false,
      "autosize": true,
      "showVolume": false,
      "showMA": false,
      "colorTheme": "light",
      "locale": "{{ stocks.locale | default: site.lang | default: 'en' }}",
      "scalePosition": "right",
      "scaleMode": "Normal",
      "fontFamily": "-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', sans-serif",
      "fontSize": "12",
      "noTimeScale": false,
      "valuesTracking": "1",
      "changeMode": "price-and-percent",
      "chartType": "area",
      "lineWidth": 2,
      "dateRanges": ["1d|1","1m|30","3m|60","1y|1D","5y|1W","all|1M"]
    }
    </script>
  </div>

  <div class="tradingview-widget-container stock-widget-dark">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
    {
      "symbols": [
        {% for symbol in stocks.symbols %}["{{ symbol | escape }}"]{% unless forloop.last %},{% endunless %}{% endfor %}
      ],
      "chartOnly": false,
      "autosize": true,
      "showVolume": false,
      "showMA": false,
      "colorTheme": "dark",
      "locale": "{{ stocks.locale | default: site.lang | default: 'en' }}",
      "scalePosition": "right",
      "scaleMode": "Normal",
      "fontFamily": "-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', sans-serif",
      "fontSize": "12",
      "noTimeScale": false,
      "valuesTracking": "1",
      "changeMode": "price-and-percent",
      "chartType": "area",
      "lineWidth": 2,
      "dateRanges": ["1d|1","1m|30","3m|60","1y|1D","5y|1W","all|1M"]
    }
    </script>
  </div>
</div>
{% else %}
<p class="stock-widget__empty">Add stock symbols to <code>_data/stocks.yml</code> to render a watchlist.</p>
{% endif %}
